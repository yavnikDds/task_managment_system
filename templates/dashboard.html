<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Dashboard</title>
</head>

<body>
    <h1>Task Dashboard</h1>
    <h2>Welcome, {{ current_user.username }}!</h2>

    <a href="{{ url_for('add_task') }}">Add New Task</a>
    <h3>Your Tasks:</h3>

    <!-- Display tasks in a table -->
    <table border="1">
        <tr>
            <th>Title</th>
            <th>Description</th>
            <th>Due Date</th>
            <th>Status</th>
            <th>Actions</th>
        </tr>
        {% for task in tasks %}
        <tr>
            <td>{{ task.title }}</td>
            <td>{{ task.description }}</td>
            <td>{{ task.due_date }}</td>
            <td>{{ task.status }}</td>
            <td>
                <a href="{{ url_for('edit_task', task_id=task.id) }}">Edit</a>
                <a href="{{ url_for('delete_task', task_id=task.id) }}">Delete</a>
                <!-- <form action="{{ url_for('delete_task', task_id=task.id) }}" method="post">
                    <input type="submit" value="Delete">
                </form> -->
            </td>
        </tr>
        {% endfor %}
    </table>

    <!-- <h4>Filter Tasks:</h4>
    <form method="GET" action="{{ url_for('dashboard') }}">
        <select name="filter">
            <option value="all">All</option>
            <option value="completed">Completed</option>
            <option value="incomplete">Incomplete</option>
        </select>
        <input type="submit" value="Apply Filter">
    </form> -->

    <!-- <h4>Filter Tasks:</h4>
    <form method="GET" action="{{ url_for('dashboard') }}">
        <label for="status">Completion Status:</label>
        <select name="status" id="status">
            <option value="incomplete">Incomplete</option>
            <option value="all">All</option>
            <option value="completed">Completed</option>
            <option value="running">Running</option>
        </select>

        <label for="due_date">Due Date:</label>
        <select name="due_date" id="due_date">
            <option value="all">All</option>
            <option value="today">Due Today</option>
            <option value="week">Due in a Week</option>
            <option value="15days">Due in 15 Days</option>
            <option value="month">Due in a Month</option>
        </select>

        <input type="submit" value="Apply Filters">
    </form> -->
    <h4>Filter Tasks:</h4>
<form method="GET" action="{{ url_for('dashboard') }}">
    <label for="status">Status:</label>
    <select name="status" id="status">
        <option value="all" {% if status_filter == 'all' %}selected{% endif %}>All</option>
        <option value="completed" {% if status_filter == 'completed' %}selected{% endif %}>Completed</option>
        <option value="incomplete" {% if status_filter == 'incomplete' %}selected{% endif %}>Incomplete</option>
        <option value="running" {% if status_filter == 'running' %}selected{% endif %}>Running</option>
    </select>

    <label for="due_date">Due Date:</label>
    <select name="due_date" id="due_date">
        <option value="all" {% if due_date_filter == 'all' %}selected{% endif %}>All</option>
        <option value="today" {% if due_date_filter == 'today' %}selected{% endif %}>Today</option>
        <option value="week" {% if due_date_filter == 'week' %}selected{% endif %}>This Week</option>
        <option value="15days" {% if due_date_filter == '15days' %}selected{% endif %}>Next 15 Days</option>
        <option value="month" {% if due_date_filter == 'month' %}selected{% endif %}>This Month</option>
    </select>

    <input type="submit" value="Apply Filter">
</form>


    <a href="{{ url_for('logout') }}">Logout</a> <!-- Logout link -->
</body>

</html>